import{g as b}from"./bills-b83bd519.js";import{_ as h,r as m,H as r,s as w,b as j,o as i,c as d,d as t,e as x,f,t as l,F as B,J as k,j as C,E as M,h as p,C as N}from"./index-06309a7e.js";import"./index-d5848531.js";const V={class:"fade-in"},E={class:"mb-6"},F={class:"flex justify-between items-center"},z={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6"},S={class:"stat-card"},$={class:"flex justify-between items-start"},A={class:"text-2xl font-semibold mt-1"},D={class:"stat-card"},H={class:"flex justify-between items-start"},I={class:"text-2xl font-semibold mt-1"},J={class:"stat-card"},L={class:"flex justify-between items-start"},T={class:"text-2xl font-semibold mt-1"},q={class:"stat-card"},G={class:"flex justify-between items-start"},K={class:"text-2xl font-semibold mt-1"},O={class:"bg-white rounded-lg shadow-sm border border-gray-100 p-6"},P={class:"flex justify-between items-center mb-6"},Q={class:"overflow-x-auto"},R={class:"w-full"},U={class:"py-3 px-4 text-sm font-medium"},W={class:"py-3 px-4 text-sm"},X={class:"py-3 px-4 text-sm font-medium"},Y={class:"py-3 px-4 text-sm"},Z={class:"py-3 px-4"},tt={class:"py-3 px-4 text-sm"},st={key:0,class:"text-center py-12"},et={__name:"Bills",setup(lt){const o=m([]),n=m(!1),y=r(()=>o.value.filter(e=>e.status==="已支付").length),g=r(()=>o.value.filter(e=>e.status!=="已支付").length),_=r(()=>o.value.reduce((e,s)=>e+(s.amount||0),0).toFixed(2)),v=e=>({已支付:"bg-success/10 text-success",待支付:"bg-warning/10 text-warning",已取消:"bg-gray-100 text-gray-600",支付失败:"bg-danger/10 text-danger"})[e]||"bg-gray-100 text-gray-600",u=async()=>{n.value=!0;try{const e=await b();o.value=e.data||[]}catch(e){M.error(e.message||"获取账单失败")}finally{n.value=!1}};return w(u),(e,s)=>{const c=j("el-button");return i(),d("div",V,[t("div",E,[t("div",F,[s[2]||(s[2]=t("div",null,[t("h2",{class:"text-[clamp(1.25rem,3vw,1.75rem)] font-semibold"},"收费明细"),t("p",{class:"text-gray-500 mt-1"},"查看您的停车费用记录")],-1)),x(c,{type:"primary",onClick:s[0]||(s[0]=a=>e.$router.push("/user")),class:"back-btn"},{default:f(()=>s[1]||(s[1]=[t("i",{class:"fa fa-arrow-left mr-2"},null,-1),p(" 返回首页 ")])),_:1,__:[1]})])]),t("div",z,[t("div",S,[t("div",$,[t("div",null,[s[3]||(s[3]=t("p",{class:"text-gray-500 text-sm"},"总账单数",-1)),t("h3",A,l(o.value.length),1)]),s[4]||(s[4]=t("div",{class:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center text-primary"},[t("i",{class:"fa fa-file-text"})],-1))])]),t("div",D,[t("div",H,[t("div",null,[s[5]||(s[5]=t("p",{class:"text-gray-500 text-sm"},"已支付",-1)),t("h3",I,l(y.value),1)]),s[6]||(s[6]=t("div",{class:"w-10 h-10 rounded-full bg-success/10 flex items-center justify-center text-success"},[t("i",{class:"fa fa-check-circle"})],-1))])]),t("div",J,[t("div",L,[t("div",null,[s[7]||(s[7]=t("p",{class:"text-gray-500 text-sm"},"待支付",-1)),t("h3",T,l(g.value),1)]),s[8]||(s[8]=t("div",{class:"w-10 h-10 rounded-full bg-warning/10 flex items-center justify-center text-warning"},[t("i",{class:"fa fa-clock-o"})],-1))])]),t("div",q,[t("div",G,[t("div",null,[s[9]||(s[9]=t("p",{class:"text-gray-500 text-sm"},"总金额",-1)),t("h3",K,"¥"+l(_.value),1)]),s[10]||(s[10]=t("div",{class:"w-10 h-10 rounded-full bg-info/10 flex items-center justify-center text-info"},[t("i",{class:"fa fa-money"})],-1))])])]),t("div",O,[t("div",P,[s[12]||(s[12]=t("h3",{class:"font-medium text-lg"},"账单列表",-1)),x(c,{type:"primary",size:"small",onClick:u,loading:n.value},{default:f(()=>s[11]||(s[11]=[t("i",{class:"fa fa-refresh mr-1"},null,-1),p(" 刷新 ")])),_:1,__:[11]},8,["loading"])]),t("div",Q,[t("table",R,[s[13]||(s[13]=t("thead",null,[t("tr",{class:"border-b border-gray-100"},[t("th",{class:"text-left py-3 px-4 text-sm font-medium text-gray-500"},"账单号"),t("th",{class:"text-left py-3 px-4 text-sm font-medium text-gray-500"},"订单号"),t("th",{class:"text-left py-3 px-4 text-sm font-medium text-gray-500"},"金额"),t("th",{class:"text-left py-3 px-4 text-sm font-medium text-gray-500"},"支付时间"),t("th",{class:"text-left py-3 px-4 text-sm font-medium text-gray-500"},"状态"),t("th",{class:"text-left py-3 px-4 text-sm font-medium text-gray-500"},"支付方式")])],-1)),t("tbody",null,[(i(!0),d(B,null,k(o.value,a=>(i(),d("tr",{key:a.id,class:"border-b border-gray-50 hover:bg-gray-50"},[t("td",U,l(a.id),1),t("td",W,l(a.order_id),1),t("td",X,"¥"+l(a.amount),1),t("td",Y,l(a.pay_time||"-"),1),t("td",Z,[t("span",{class:N([v(a.status),"px-2 py-1 rounded-full text-xs"])},l(a.status),3)]),t("td",tt,l(a.pay_method||"-"),1)]))),128))])])]),o.value.length===0&&!n.value?(i(),d("div",st,s[14]||(s[14]=[t("i",{class:"fa fa-file-text-o text-4xl text-gray-300 mb-4"},null,-1),t("p",{class:"text-gray-500"},"暂无账单记录",-1)]))):C("",!0)])])}}},it=h(et,[["__scopeId","data-v-edbf2d3e"]]);export{it as default};
