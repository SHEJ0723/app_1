import{g as v}from"./parking-f1dd034f.js";import{g as p}from"./orders-5a34db32.js";import{_ as y,r as n,s as b,b as w,o as f,c as u,d as t,t as l,h as i,e as h,f as _,F as j,J as k,B as o,C}from"./index-06309a7e.js";import"./cacheManager-5937ebc8.js";import"./index-d5848531.js";const $={class:"fade-in"},S={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6"},P={class:"stat-card"},F={class:"flex justify-between items-start"},N={class:"text-2xl font-semibold mt-1"},B={class:"stat-card"},D={class:"flex justify-between items-start"},M={class:"text-2xl font-semibold mt-1"},V={class:"stat-card"},z={class:"flex justify-between items-start"},A={class:"text-2xl font-semibold mt-1"},O={class:"stat-card"},J={class:"flex justify-between items-start"},R={class:"text-2xl font-semibold mt-1"},T={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6"},E={class:"bg-white rounded-lg shadow-sm border border-gray-100 p-5 lg:col-span-2"},L={class:"flex justify-between items-center mb-6"},U={class:"overflow-x-auto"},q={class:"w-full"},G={class:"py-3 px-4 text-sm"},H={class:"py-3 px-4 text-sm"},I={class:"py-3 px-4 text-sm font-medium"},K={class:"py-3 px-4"},Q={class:"bg-white rounded-lg shadow-sm border border-gray-100 p-5"},W={class:"space-y-3"},X={__name:"Dashboard",setup(Y){const d=n(0),c=n([]),m=n(0),r=n([]),x=e=>({已完成:"bg-success/10 text-success",进行中:"bg-warning/10 text-warning",已取消:"bg-gray-100 text-gray-600",待支付:"bg-danger/10 text-danger"})[e]||"bg-gray-100 text-gray-600";return b(async()=>{try{const e=JSON.parse(localStorage.getItem("userInfo"));c.value=(e==null?void 0:e.licensePlates)||[],m.value=(e==null?void 0:e.balance)||0}catch{c.value=[],m.value=0}try{const e=await v({status:"空闲",per_page:1e3});d.value=Array.isArray(e.data)?e.data.length:0}catch{d.value=0}try{const e=await p({page:1,pageSize:5});r.value=(e.data||[]).map(s=>({date:s.start_time?s.start_time.replace("T"," ").slice(0,16):"",duration:s.duration||"--",fee:s.amount?`¥${s.amount.toFixed(2)}`:"--",status:s.status||"--"}))}catch{r.value=[]}}),(e,s)=>{const g=w("el-button");return f(),u("div",$,[s[25]||(s[25]=t("div",{class:"mb-6"},[t("h2",{class:"text-[clamp(1.25rem,3vw,1.75rem)] font-semibold"},"个人仪表盘"),t("p",{class:"text-gray-500 mt-1"},"欢迎回来，这里是您的停车信息概览")],-1)),t("div",S,[t("div",P,[t("div",F,[t("div",null,[s[5]||(s[5]=t("p",{class:"text-gray-500 text-sm"},"可用车位",-1)),t("h3",N,l(d.value),1),s[6]||(s[6]=t("p",{class:"text-success text-sm mt-2 flex items-center"},[t("i",{class:"fa fa-arrow-up mr-1"}),i(" 实时更新 "),t("span",{class:"text-gray-500 ml-1"},"车位状态")],-1))]),s[7]||(s[7]=t("div",{class:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center text-primary"},[t("i",{class:"fa fa-car"})],-1))])]),t("div",B,[t("div",D,[t("div",null,[s[8]||(s[8]=t("p",{class:"text-gray-500 text-sm"},"已绑定车牌",-1)),t("h3",M,l(c.value.length),1),s[9]||(s[9]=t("p",{class:"text-success text-sm mt-2 flex items-center"},[t("i",{class:"fa fa-check mr-1"}),i(" 正常 "),t("span",{class:"text-gray-500 ml-1"},"车辆信息")],-1))]),s[10]||(s[10]=t("div",{class:"w-10 h-10 rounded-full bg-success/10 flex items-center justify-center text-success"},[t("i",{class:"fa fa-id-card"})],-1))])]),t("div",V,[t("div",z,[t("div",null,[s[11]||(s[11]=t("p",{class:"text-gray-500 text-sm"},"账户余额",-1)),t("h3",A,"¥"+l(m.value.toFixed(2)),1),s[12]||(s[12]=t("p",{class:"text-warning text-sm mt-2 flex items-center"},[t("i",{class:"fa fa-wallet mr-1"}),i(" 余额充足 "),t("span",{class:"text-gray-500 ml-1"},"可正常使用")],-1))]),s[13]||(s[13]=t("div",{class:"w-10 h-10 rounded-full bg-warning/10 flex items-center justify-center text-warning"},[t("i",{class:"fa fa-credit-card"})],-1))])]),t("div",O,[t("div",J,[t("div",null,[s[14]||(s[14]=t("p",{class:"text-gray-500 text-sm"},"本月停车",-1)),t("h3",R,l(r.value.length),1),s[15]||(s[15]=t("p",{class:"text-info text-sm mt-2 flex items-center"},[t("i",{class:"fa fa-history mr-1"}),i(" 停车记录 "),t("span",{class:"text-gray-500 ml-1"},"本月统计")],-1))]),s[16]||(s[16]=t("div",{class:"w-10 h-10 rounded-full bg-info/10 flex items-center justify-center text-info"},[t("i",{class:"fa fa-clock-o"})],-1))])])]),t("div",T,[t("div",E,[t("div",L,[s[18]||(s[18]=t("h3",{class:"font-medium"},"最近停车记录",-1)),h(g,{type:"primary",size:"small",onClick:s[0]||(s[0]=a=>e.$router.push({name:"UserOrders"}))},{default:_(()=>s[17]||(s[17]=[i(" 查看全部 ")])),_:1,__:[17]})]),t("div",U,[t("table",q,[s[19]||(s[19]=t("thead",null,[t("tr",{class:"border-b border-gray-100"},[t("th",{class:"text-left py-3 px-4 text-sm font-medium text-gray-500"},"日期"),t("th",{class:"text-left py-3 px-4 text-sm font-medium text-gray-500"},"停车时长"),t("th",{class:"text-left py-3 px-4 text-sm font-medium text-gray-500"},"费用"),t("th",{class:"text-left py-3 px-4 text-sm font-medium text-gray-500"},"状态")])],-1)),t("tbody",null,[(f(!0),u(j,null,k(r.value.slice(0,5),a=>(f(),u("tr",{key:a.id,class:"border-b border-gray-50 hover:bg-gray-50"},[t("td",G,l(a.date),1),t("td",H,l(a.duration),1),t("td",I,"¥"+l(a.fee),1),t("td",K,[t("span",{class:C([x(a.status),"px-2 py-1 rounded-full text-xs"])},l(a.status),3)])]))),128))])])])]),t("div",Q,[s[24]||(s[24]=t("div",{class:"flex justify-between items-center mb-6"},[t("h3",{class:"font-medium"},"快捷操作"),t("button",{class:"text-gray-400 hover:text-primary"},[t("i",{class:"fa fa-ellipsis-v"})])],-1)),t("div",W,[t("button",{onClick:s[1]||(s[1]=a=>e.$router.push({name:"ParkingReservation"})),class:"w-full flex items-center justify-between p-3 rounded-lg bg-primary/5 hover:bg-primary/10 transition-colors"},s[20]||(s[20]=[o('<div class="flex items-center" data-v-472c5e3e><div class="w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center text-primary mr-3" data-v-472c5e3e><i class="fa fa-calendar" data-v-472c5e3e></i></div><span class="font-medium" data-v-472c5e3e>预约停车</span></div><i class="fa fa-chevron-right text-gray-400" data-v-472c5e3e></i>',2)])),t("button",{onClick:s[2]||(s[2]=a=>e.$router.push({name:"FindCar"})),class:"w-full flex items-center justify-between p-3 rounded-lg bg-success/5 hover:bg-success/10 transition-colors"},s[21]||(s[21]=[o('<div class="flex items-center" data-v-472c5e3e><div class="w-8 h-8 rounded-full bg-success/10 flex items-center justify-center text-success mr-3" data-v-472c5e3e><i class="fa fa-search" data-v-472c5e3e></i></div><span class="font-medium" data-v-472c5e3e>查找车辆</span></div><i class="fa fa-chevron-right text-gray-400" data-v-472c5e3e></i>',2)])),t("button",{onClick:s[3]||(s[3]=a=>e.$router.push({name:"AutoPay"})),class:"w-full flex items-center justify-between p-3 rounded-lg bg-warning/5 hover:bg-warning/10 transition-colors"},s[22]||(s[22]=[o('<div class="flex items-center" data-v-472c5e3e><div class="w-8 h-8 rounded-full bg-warning/10 flex items-center justify-center text-warning mr-3" data-v-472c5e3e><i class="fa fa-credit-card" data-v-472c5e3e></i></div><span class="font-medium" data-v-472c5e3e>自动扣费</span></div><i class="fa fa-chevron-right text-gray-400" data-v-472c5e3e></i>',2)])),t("button",{onClick:s[4]||(s[4]=a=>e.$router.push({name:"ParkingMap"})),class:"w-full flex items-center justify-between p-3 rounded-lg bg-info/5 hover:bg-info/10 transition-colors"},s[23]||(s[23]=[o('<div class="flex items-center" data-v-472c5e3e><div class="w-8 h-8 rounded-full bg-info/10 flex items-center justify-center text-info mr-3" data-v-472c5e3e><i class="fa fa-map" data-v-472c5e3e></i></div><span class="font-medium" data-v-472c5e3e>停车场地图</span></div><i class="fa fa-chevron-right text-gray-400" data-v-472c5e3e></i>',2)]))])])])])}}},lt=y(X,[["__scopeId","data-v-472c5e3e"]]);export{lt as default};
