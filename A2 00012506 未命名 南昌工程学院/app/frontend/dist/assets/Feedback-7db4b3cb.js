import{s as C}from"./feedback-8bd3c933.js";import{_ as w,r,u as F,b as s,o as V,c as B,e as t,d as p,f as o,h as f,E as c}from"./index-06309a7e.js";import{C as E}from"./CommonButton-70b7e8fe.js";const H={class:"feedback-view"},N={style:{"text-align":"center","margin-top":"32px"}},R={__name:"Feedback",setup(h){const n=r({content:""}),b={content:[{required:!0,message:"请输入反馈内容",trigger:"blur"},{min:5,message:"内容不少于5个字",trigger:"blur"}]},u=r(null),a=r(!1),d=F(),y=()=>{u.value.validate(async l=>{if(l){a.value=!0;try{const e=await C({content:n.value.content});e.success?(c.success("反馈提交成功！"),n.value.content="",d.push({name:"FeedbackHistory"})):c.error(e.message||"提交失败")}catch(e){c.error("提交失败"),console.error("提交反馈失败:",e)}finally{a.value=!1}}})};function v(){d.push({name:"FeedbackHistory"})}return(l,e)=>{const g=s("el-input"),m=s("el-form-item"),i=s("el-button"),k=s("el-form"),x=s("el-card");return V(),B("div",H,[t(E,{class:"pretty-btn back-btn",type:"secondary",size:"small",text:"返回",onClick:e[0]||(e[0]=_=>l.$router.back())}),e[4]||(e[4]=p("h2",null,"意见反馈",-1)),t(x,{style:{"max-width":"500px",margin:"0 auto"}},{default:o(()=>[t(k,{model:n.value,rules:b,ref_key:"formRef",ref:u,"label-width":"80px",class:"feedback-form"},{default:o(()=>[t(m,{label:"反馈内容",prop:"content"},{default:o(()=>[t(g,{modelValue:n.value.content,"onUpdate:modelValue":e[1]||(e[1]=_=>n.value.content=_),type:"textarea",rows:4,placeholder:"请输入您的建议或遇到的问题"},null,8,["modelValue"])]),_:1}),t(m,null,{default:o(()=>[t(i,{class:"pretty-btn",type:"primary",onClick:y,loading:a.value},{default:o(()=>e[2]||(e[2]=[f("提交")])),_:1,__:[2]},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1}),p("div",N,[t(i,{class:"pretty-btn",type:"primary",onClick:v},{default:o(()=>e[3]||(e[3]=[f("查看我的反馈记录")])),_:1,__:[3]})])])}}},z=w(R,[["__scopeId","data-v-c1d42046"]]);export{z as default};
